(this["webpackJsonpsearch-sengrid-template-app"]=this["webpackJsonpsearch-sengrid-template-app"]||[]).push([[0],{137:function(e,t,n){},438:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(14),c=n(28),s=(n(134),n(135),n(136),n(137),n(52)),i=n(11),o=n.n(i),u=n(15),p=n(118),l=n(119),d=n(126),f=n(125),h=n(8),b=n(29),j=n(7),m=function(e){Object(d.a)(n,e);var t=Object(f.a)(n);function n(e){var a;return Object(p.a)(this,n),(a=t.call(this,e)).onConfigure=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.props.sdk.app.getCurrentState();case 2:return t=e.sent,e.abrupt("return",{parameters:a.state.parameters,targetState:t});case 4:case"end":return e.stop()}}),e)}))),a.handleApiKeyChange=function(e){var t=a.state.parameters;console.log(e.target.value),a.setState({parameters:Object(s.a)(Object(s.a)({},t),{},{apikey:e.target.value})})},a.state={parameters:{apikey:""}},e.sdk.app.onConfigure((function(){return a.onConfigure()})),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.sdk.app.getParameters();case 2:t=e.sent,this.setState(t?{parameters:t}:this.state,(function(){n.props.sdk.app.setReady()}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(j.jsx)(h.Workbench,{className:Object(b.a)({margin:"80px"}),children:Object(j.jsx)(h.Form,{className:Object(b.a)({width:"100%"}),children:Object(j.jsxs)(h.FieldGroup,{className:Object(b.a)({width:"50%"}),children:[Object(j.jsx)(h.Heading,{children:"App Config"}),Object(j.jsx)(h.Paragraph,{children:"Welcome to your contentful app. This is your config page."}),Object(j.jsx)(h.TextField,{required:!0,name:"apikey",id:"apikey",labelText:"Sendgrind API Key",value:this.state.parameters.apikey,onChange:this.handleApiKeyChange,helpText:"Provide Sendgrid API Key"})]})})})}}]),n}(a.Component),x=n(30),O=n(121),v=n(122),g=n(123),k=n(127),y=n(51),w=n.n(y),C=n(124),A=Object(C.setupCache)({maxAge:6e4}),T=w.a.create({adapter:A.adapter}),S=function(e,t){return T({method:"GET",url:t||"https://api.sendgrid.com/v3/templates?page_size=200&generations=dynamic",headers:{"content-type":"application/octet-stream",authorization:"bearer ".concat(e)},params:{language_code:"en"}}).then((function(e){return e.data})).catch((function(e){return{result:[],_metadata:{}}}))};function N(e){return _.apply(this,arguments)}function _(){return(_=Object(k.a)(o.a.mark((function e(t){var n,a,r,c,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=void 0;case 1:return e.next=3,Object(g.a)(S(t,a));case 3:n=e.sent,r=Object(O.a)(n.result),e.prev=5,r.s();case 7:if((c=r.n()).done){e.next=13;break}return s=c.value,e.next=11,s;case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:a=n._metadata.next;case 22:if(a){e.next=1;break}case 23:case"end":return e.stop()}}),e,null,[[5,15,18,21]])})))).apply(this,arguments)}var E=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a,r,c,s,i,u,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],a=!0,r=!1,e.prev=3,s=Object(v.a)(N(t));case 5:return e.next=7,s.next();case 7:return i=e.sent,a=i.done,e.next=11,i.value;case 11:if(u=e.sent,a){e.next=18;break}p=u,n=n.concat(p);case 15:a=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),r=!0,c=e.t0;case 24:if(e.prev=24,e.prev=25,a||null==s.return){e.next=29;break}return e.next=29,s.return();case 29:if(e.prev=29,!r){e.next=32;break}throw c;case 32:return e.finish(29);case 33:return e.finish(24);case 34:return e.abrupt("return",n);case 35:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}(),I=function(e){var t,n=e.sdk,r=n.parameters.installation.apikey,c=Object(a.useState)({id:n.field.getValue(),name:""}),s=Object(x.a)(c,2),i=s[0],p=s[1],l=Object(a.useState)([]),d=Object(x.a)(l,2),f=d[0],b=d[1],m=Object(a.useState)(f),O=Object(x.a)(m,2),v=O[0],g=O[1];Object(a.useEffect)((function(){(function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=6;break}return e.next=3,E(r);case 3:t=e.sent,b(t),g(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[r]);var k=Object(a.useCallback)((function(e){var t=e?f.filter((function(t){var n=e.split(" ").filter((function(e){return e})),a=new RegExp(n.join(".*"),"ig");return(t.name.match(a)||[]).length})):f;g(t)}),[g,f]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(h.Autocomplete,{maxHeight:90,onQueryChange:k,items:v,onChange:function(e){var t=e.id,a=e.name;n.field.setValue(t),p({id:t,name:a})},isLoading:0===f.length,children:function(e){return e.map((function(e){return Object(j.jsx)("span",{children:e.name},e.id)}))}}),Object(j.jsxs)(h.Note,{noteType:"positive",children:[Object(j.jsx)(h.HelpText,{children:null===(t=f.filter((function(e){return e.id===n.field.getValue()}))[0])||void 0===t?void 0:t.name}),Object(j.jsx)(h.Heading,{children:i.id})]})]})};Object(c.init)((function(e){var t=document.getElementById("root");[{location:c.locations.LOCATION_APP_CONFIG,component:Object(j.jsx)(m,{sdk:e})},{location:c.locations.LOCATION_ENTRY_FIELD,component:Object(j.jsx)(I,{sdk:e})}].forEach((function(n){e.location.is(n.location)&&Object(r.render)(n.component,t)}))}))}},[[438,1,2]]]);
//# sourceMappingURL=main.d1f8fabe.chunk.js.map